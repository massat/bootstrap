---

- name: git | install git, hub, tig
  homebrew: "name={{ item }}"
  with_items:
    - git
    - hub
    - tig
    - gh

- name: git | place .gitconfig
  copy: src=gitconfig dest=~/.gitconfig

- name: git | place .gitignore
  copy: src=gitignore dest=~/.gitignore

- name: git | download git-credential-osxkeychain
  get_url: url=https://github-media-downloads.s3.amazonaws.com/osx/git-credential-osxkeychain dest=/usr/local/bin
  sudo: yes

- name: git | add +x permission
  command: chmod u+x /usr/local/bin/git-credential-osxkeychain
  sudo: yes

- name: git | configure credential.helper osxkeychain
  command: git config --global credential.helper osxkeychain

- name: git | path to git
  command: brew --prefix git
  register: path_to_git

- name: git | link diff-highlight into PATH
  file: "src={{ path_to_git.stdout }}/share/git-core/contrib/diff-highlight/diff-highlight dest=/usr/local/bin/diff-highlight state=link"